name: 'AWS Secrets Manager Action'
author: 'Abhilash Kishore'
description: 'Use secrets from AWS Secrets Manager as environment variables in your GitHub Actions workflow'
inputs:
  aws-access-key-id:
    description: 'Access Key ID of the IAM user with the required AWS Secrets Manager permissions'
    required: true
  aws-secret-access-key:
    description: 'Corresponding Secret Access Key of the IAM user with the required AWS Secrets Manager permissions'
    required: true
  aws-session-token:
    description: '(Optional) Corresponding Session Token of the IAM user session with the required AWS Secrets Manager permissions'
    required: false
  aws-region:
    description: 'The region of AWS Secrets Manager which contains your secrets (e.g.: us-east-1)'
    required: false
    default: us-east-1
  secrets:
    description: 'List of secret names you want to fetch secret values for'
    required: false
    default: beagle/core/*
  parse-json:
    description: 'If true and secret values are stringified JSON objects, they will be parsed and flattened. Its key value pairs will become individual secrets'
    required: false
    default: 'true'
runs:
  using: 'composite'
  steps:
    - run: 'curl --show-error --location https://github.com/abhilash1in/aws-secrets-manager-action/archive/refs/tags/v1.0.1.tar.gz | tar -zxvf - -C .'
      shell: bash
    - run: export INPUT_SECRETS=${{ inputs.secrets }}
      shell: bash
    - run: export INPUT_AWS_ACCESS_KEY_ID=${{ inputs.aws-access-key-id }}
      shell: bash
    - run: export INPUT_AWS_SECRET_ACCESS_KEY=${{ inputs.aws-secret-access-key }}
      shell: bash
    - run: export INPUT_PARSE_JSON=${{ inputs.parse-json }}
      shell: bash
    - run: export INPUT_AWS_REGION=dsadasdasdas
      shell: bash
    - run: 'node aws-secrets-manager-action-1.0.1/dist/index.js'
      shell: bash
branding:
  icon: lock
  color: blue